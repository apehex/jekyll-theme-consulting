<script type="text/javascript">
    const contactFormElement = document.getElementById("contact-form");
    const nameInputElement = document.getElementById("contact-name");
    const emailInputElement = document.getElementById("contact-email");
    const messageInputElement = document.getElementById("contact-message");
    const submitInputElement = document.getElementById("contact-submit-button");
    var recaptchaWidget;

    const isInputValid = function() {
        return (nameInputElement.checkValidity()
            && emailInputElement.checkValidity()
            && messageInputElement.checkValidity())
    };
    
    const isRecaptchaValid = function()Â {
        var responseToken = grecaptcha.getResponse(recaptchaWidget);
        return true;
    };

    const disableSubmitInputElement = function (disabled = true) {
        submitInputElement.disabled = disabled;
    }

    const resetContactForm = function() {
        contactFormElement.reset();
        disableSubmitInputElement();
    };
    
    const sendContactMessage = function() {
        encodeURIComponent(nameInputElement.value);
        encodeURIComponent(emailInputElement.value);
        encodeURIComponent(messageInputElement.value);
    };
    
    var onloadCallback = function() {
        var verifyForm = function(response) {
            if (isInputValid() && isRecaptchaValid()) {
                disableSubmitInputElement(false);
            } else {
                disableSubmitInputElement();
            }
        };
        recaptchaWidget = grecaptcha.render('recaptcha-checkbox', {
            'sitekey' : '{{ site.recaptcha.sitekey }}',
            'theme' : 'dark',
            'callback' : verifyForm,
            'expired-callback': disableSubmitInputElement
        });
    };
</script>
<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
